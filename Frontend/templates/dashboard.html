{% extends "base.html" %}
{% block body_class %}dashboard-body{% endblock %}

{% block content %}

<div class="dashboard-container">

    <div class="dashboard-header">
        <h1>ðŸ‘‘ Admin Dashboard</h1>
        <p>Welcome, {{ session['username'] }}</p>
    </div>

    <!-- Stats -->
    <div class="stats-card">
        <h3>Total Logins</h3>
        <h2>{{ total_logins }}</h2>
    </div>

    <!-- Registered Users -->
    <div class="table-card">
        <h3>Registered Users</h3>
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Role</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user[1] }}</td>
                    <td>{{ user[2] }}</td>
                    <td>
                        <a href="/delete_user/{{ user[0] }}" class="delete-btn">
                            Delete
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Login History -->
    <div class="table-card">
        <h3>Login History</h3>
        <table>
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Login Time</th>
                    <th>Logout Time</th>
                </tr>
            </thead>
            <tbody>
                {% for log in history %}
                <tr>
                    <td>{{ log[0] }}</td>
                    <td>{{ log[1] }}</td>
                    <td>
                        {{ log[2] if log[2] else "Still Logged In" }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

{% endblock %}